<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>æˆ‘çš„èœè°±å°å¡ç‰‡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #fdf7ff;
      --card-bg: #ffffff;
      --accent: #ffbcd4;
      --accent-2: #b4d8ff;
      --text-main: #333333;
      --text-light: #777777;
      --border-soft: #f0e4ff;
      --shadow-soft: 0 8px 18px rgba(0, 0, 0, 0.06);
      --radius-lg: 20px;
      --radius-md: 14px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "PingFang SC", "Microsoft YaHei", sans-serif;
      background: radial-gradient(circle at top, #ffe9f2 0, #fdf7ff 40%, #f7f9ff 100%);
      color: var(--text-main);
      min-height: 100vh;
      padding: 16px;
      display: flex;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 960px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 28px;
      box-shadow: 0 18px 40px rgba(183, 163, 255, 0.28);
      backdrop-filter: blur(16px);
      padding: 22px 20px 24px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 18px;
      gap: 12px;
    }

    .title-wrap {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    h1 {
      font-size: 22px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    h1 span.emoji {
      font-size: 22px;
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-light);
    }

    .pill {
      padding: 6px 12px;
      border-radius: 999px;
      background: linear-gradient(135deg, #ffe0ec, #d7e7ff);
      font-size: 12px;
      color: #5b4c72;
      white-space: nowrap;
    }
    
        <link rel="icon" type="image/png" href="icon-512.png" />
<link rel="apple-touch-icon" href="icon-512.png" />
<meta name="theme-color" content="#fdf7ff" />

    /* è¡¨å•åŒºåŸŸ */

    .card-form {
      background: linear-gradient(135deg, #fff7fb, #f5f8ff);
      border-radius: var(--radius-lg);
      padding: 14px 14px 16px;
      box-shadow: var(--shadow-soft);
      margin-bottom: 18px;
      border: 1px solid #f3e8ff;
    }

    .form-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 10px;
    }

    .form-group {
      flex: 1 1 140px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 13px;
    }

    label {
      color: #5d4c7e;
      font-weight: 500;
    }

    input[type="text"],
    select,
    textarea {
      border-radius: 12px;
      border: 1px solid #e3d7ff;
      padding: 7px 10px;
      font-size: 13px;
      outline: none;
      background: #ffffffcc;
      transition: border 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    input[type="text"]:focus,
    select:focus,
    textarea:focus {
      border-color: #c4b1ff;
      box-shadow: 0 0 0 2px rgba(196, 177, 255, 0.2);
      background: #ffffff;
    }

    textarea {
      min-height: 60px;
      resize: vertical;
    }

    .image-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .image-input-wrap {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 13px;
    }

    input[type="file"] {
      font-size: 12px;
    }

    .image-preview {
      width: 80px;
      height: 80px;
      border-radius: 18px;
      border: 1px dashed #e4d6ff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: var(--text-light);
      background: #ffffffb3;
      overflow: hidden;
    }

    .image-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-top: 4px;
    }

    button {
      border: none;
      cursor: pointer;
    }

    .btn-primary {
      padding: 7px 14px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--accent), #ffd1b8);
      color: #5b3742;
      font-size: 13px;
      font-weight: 600;
      box-shadow: 0 10px 18px rgba(255, 148, 192, 0.3);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-primary:active {
      transform: translateY(1px);
      box-shadow: 0 6px 12px rgba(255, 148, 192, 0.35);
    }

    .btn-secondary {
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 12px;
      background: #ffffffcc;
      color: #7a6d97;
      border: 1px solid #e0d4ff;
    }

    /* èœå¡ç‰‡å®«æ ¼ */

    .grid-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
      margin-top: 6px;
    }

    .grid-header-title {
      font-size: 15px;
      font-weight: 600;
      color: #473b68;
    }

    .grid-header-count {
      font-size: 12px;
      color: var(--text-light);
    }

    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
    }

    .dish-card {
      background: var(--card-bg);
      border-radius: var(--radius-md);
      padding: 10px;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border-soft);
      display: flex;
      flex-direction: column;
      gap: 6px;
      position: relative;
      overflow: hidden;
    }

    .dish-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at -10% -10%, rgba(255, 188, 212, 0.4), transparent 60%),
        radial-gradient(circle at 110% 120%, rgba(180, 216, 255, 0.45), transparent 60%);
      opacity: 0.5;
      pointer-events: none;
    }

    .dish-top {
      display: flex;
      gap: 8px;
      align-items: flex-start;
      position: relative;
      z-index: 1;
    }

    .dish-img {
      width: 64px;
      height: 64px;
      border-radius: 16px;
      overflow: hidden;
      background: linear-gradient(135deg, #ffe5f0, #f0f4ff);
      border: 1px solid #f2e7ff;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: #b08bb5;
    }

    .dish-img img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .dish-main {
      flex: 1;
      min-width: 0;
    }

    .dish-name {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 2px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .dish-type {
      display: inline-flex;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      background: rgba(255, 255, 255, 0.7);
      border: 1px solid rgba(255, 196, 214, 0.9);
      color: #b0506e;
      margin-bottom: 3px;
    }

    .dish-ingredients-label {
      font-size: 11px;
      color: #8a7aa5;
      margin-top: 2px;
      margin-bottom: 1px;
    }

    .dish-ingredients {
      font-size: 11px;
      color: var(--text-main);
      line-height: 1.4;
      max-height: 44px;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .dish-actions {
      display: flex;
      justify-content: flex-end;
      margin-top: 4px;
      position: relative;
      z-index: 1;
    }

    .btn-delete {
      padding: 3px 8px;
      font-size: 11px;
      border-radius: 999px;
      background: #fff0f3;
      color: #c75b7a;
      border: 1px solid #ffd2de;
    }

    .empty-state {
      font-size: 13px;
      color: var(--text-light);
      text-align: center;
      padding: 18px 10px 6px;
    }

    @media (max-width: 600px) {
      .app {
        padding: 16px 14px 18px;
        border-radius: 22px;
      }

      h1 {
        font-size: 20px;
      }

      .cards-grid {
        grid-template-columns: repeat(auto-fit, minmax(145px, 1fr));
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="title-wrap">
        <h1>
          <span class="emoji">ğŸ±</span>
          æˆ‘çš„èœèœå°æ–¹æ ¼
        </h1>
        <div class="subtitle">è®°å½•ä½ åšè¿‡ / æƒ³åšçš„èœï¼Œæ¯ä¸€é“éƒ½æ˜¯å°å°å¯çˆ±å¡ç‰‡ã€‚</div>
      </div>
      <div class="pill">æœ¬åœ°ä¿å­˜ Â· ä»…è‡ªå·±å¯è§</div>
    </header>

    <!-- è¡¨å•ï¼šæ·»åŠ èœ -->
    <section class="card-form">
      <form id="dishForm">
        <div class="form-row">
          <div class="form-group">
            <label for="dishName">èœå *</label>
            <input
              type="text"
              id="dishName"
              placeholder="ä¾‹å¦‚ï¼šç•ªèŒ„ç‚’è›‹ / è¾£å­é¸¡"
              required
            />
          </div>
          <div class="form-group">
            <label for="dishType">ç±»å‹</label>
            <select id="dishType">
              <option value="">ä»»é€‰æˆ–è‡ªå·±å¡«</option>
              <option value="å®¶å¸¸èœ">å®¶å¸¸èœ</option>
              <option value="ç”œå“">ç”œå“</option>
              <option value="æ±¤/ç…²æ±¤">æ±¤ / ç…²æ±¤</option>
              <option value="ä¸»é£Ÿ">ä¸»é£Ÿ</option>
              <option value="å°åƒ">å°åƒ</option>
              <option value="é¥®å“">é¥®å“</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group" style="flex: 2 1 220px;">
            <label for="dishIngredients">é£Ÿæ / åšæ³•è¦ç‚¹</label>
            <textarea
              id="dishIngredients"
              placeholder="ä¾‹å¦‚ï¼šé¸¡è›‹ã€ç•ªèŒ„ã€è‘±èŠ±ã€ç›ã€ç³–â€¦â€¦ ç®€å•å†™ä¸€ä¸‹ç”¨é‡æˆ–åšæ³•è¦ç‚¹ä¹Ÿå¯ä»¥ã€‚"
            ></textarea>
          </div>
        </div>

        <div class="image-row">
          <div class="image-input-wrap">
            <label for="dishImage">èœçš„å›¾ç‰‡ï¼ˆå¯é€‰ï¼‰</label>
            <input type="file" id="dishImage" accept="image/*" />
          </div>
          <div class="image-preview" id="imagePreview">
            æ— å›¾ç‰‡
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-secondary" id="clearFormBtn">
            æ¸…ç©ºè¡¨å•
          </button>
          <button type="submit" class="btn-primary">
            <span>ï¼‹</span> ä¿å­˜è¿™é“èœ
          </button>
        </div>
      </form>
    </section>

    <!-- èœå¡ç‰‡å®«æ ¼ -->
    <section>
      <div class="grid-header">
        <div class="grid-header-title">æˆ‘çš„èœåˆ—è¡¨</div>
        <div class="grid-header-count" id="dishCountText">å…± 0 é“èœ</div>
      </div>
      <div id="emptyState" class="empty-state">
        è¿˜æ²¡æœ‰è®°å½•ä»»ä½•èœï½åœ¨ä¸Šé¢å¡«ä¸€å¡«ï¼Œç„¶åç‚¹â€œä¿å­˜è¿™é“èœâ€å°±ä¼šå‡ºç°å¯çˆ±å°æ–¹æ ¼å•¦ã€‚ğŸŒ¸
      </div>
      <div class="cards-grid" id="cardsGrid"></div>
    </section>
  </div>

  <script>
    // æœ¬åœ°æ•°æ®
    const STORAGE_KEY = "cute-dishes-v1";
    let dishes = [];

    // DOM è·å–
    const dishForm = document.getElementById("dishForm");
    const dishNameInput = document.getElementById("dishName");
    const dishTypeSelect = document.getElementById("dishType");
    const dishIngredientsTextarea = document.getElementById("dishIngredients");
    const dishImageInput = document.getElementById("dishImage");
    const imagePreview = document.getElementById("imagePreview");
    const cardsGrid = document.getElementById("cardsGrid");
    const dishCountText = document.getElementById("dishCountText");
    const emptyState = document.getElementById("emptyState");
    const clearFormBtn = document.getElementById("clearFormBtn");

    // ä¸´æ—¶ä¿å­˜å½“å‰è¦å­˜å‚¨çš„å›¾ç‰‡ base64
    let currentImageData = null;

    // è¯»å–æœ¬åœ°å­˜å‚¨
    function loadFromStorage() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (raw) {
          dishes = JSON.parse(raw);
        } else {
          dishes = [];
        }
      } catch (e) {
        console.error("è¯»å– localStorage å‡ºé”™ï¼š", e);
        dishes = [];
      }
    }

    // å†™å…¥æœ¬åœ°å­˜å‚¨
    function saveToStorage() {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(dishes));
      } catch (e) {
        console.error("å†™å…¥ localStorage å‡ºé”™ï¼š", e);
      }
    }

    // æ¸²æŸ“æ‰€æœ‰èœå¡ç‰‡
    function renderDishes() {
      cardsGrid.innerHTML = "";
      dishCountText.textContent = `å…± ${dishes.length} é“èœ`;

      if (!dishes.length) {
        emptyState.style.display = "block";
        return;
      } else {
        emptyState.style.display = "none";
      }

      dishes.forEach((dish, index) => {
        const card = document.createElement("div");
        card.className = "dish-card";

        const top = document.createElement("div");
        top.className = "dish-top";

        // å›¾ç‰‡
        const imgBox = document.createElement("div");
        imgBox.className = "dish-img";

        if (dish.imageData) {
          const img = document.createElement("img");
          img.src = dish.imageData;
          img.alt = dish.name || "èœå›¾ç‰‡";
          imgBox.appendChild(img);
        } else {
          imgBox.textContent = "æ— å›¾ç‰‡";
        }

        // æ–‡æœ¬ä¿¡æ¯
        const main = document.createElement("div");
        main.className = "dish-main";

        const nameEl = document.createElement("div");
        nameEl.className = "dish-name";
        nameEl.textContent = dish.name || "æœªå‘½åå°èœ";

        const typeEl = document.createElement("div");
        if (dish.type && dish.type.trim() !== "") {
          typeEl.className = "dish-type";
          typeEl.textContent = dish.type;
        }

        const ingredientsLabel = document.createElement("div");
        ingredientsLabel.className = "dish-ingredients-label";
        ingredientsLabel.textContent = "é£Ÿæ / è¦ç‚¹ï¼š" ;

        const ingredientsEl = document.createElement("div");
        ingredientsEl.className = "dish-ingredients";
        ingredientsEl.textContent =
          dish.ingredients && dish.ingredients.trim() !== ""
            ? dish.ingredients
            : "ï¼ˆè¿˜æ²¡å†™é£Ÿæï¼Œå¯ä»¥ä¹‹åè¡¥å……ï½ï¼‰";

        main.appendChild(nameEl);
        if (dish.type && dish.type.trim() !== "") {
          main.appendChild(typeEl);
        }
        main.appendChild(ingredientsLabel);
        main.appendChild(ingredientsEl);

        top.appendChild(imgBox);
        top.appendChild(main);

        // åº•éƒ¨æ“ä½œåŒº
        const actions = document.createElement("div");
        actions.className = "dish-actions";

        const deleteBtn = document.createElement("button");
        deleteBtn.className = "btn-delete";
        deleteBtn.textContent = "åˆ é™¤";
        deleteBtn.addEventListener("click", () => {
          if (confirm(`ç¡®å®šè¦åˆ é™¤ã€Œ${dish.name || "è¿™é“èœ"}ã€å—ï¼Ÿ`)) {
            dishes.splice(index, 1);
            saveToStorage();
            renderDishes();
          }
        });

        actions.appendChild(deleteBtn);

        card.appendChild(top);
        card.appendChild(actions);

        cardsGrid.appendChild(card);
      });
    }

    // å¤„ç†å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ
    dishImageInput.addEventListener("change", () => {
      const file = dishImageInput.files[0];
      if (!file) {
        currentImageData = null;
        imagePreview.innerHTML = "æ— å›¾ç‰‡";
        return;
      }

      const reader = new FileReader();
      reader.onload = function (e) {
        currentImageData = e.target.result;
        imagePreview.innerHTML = "";
        const img = document.createElement("img");
        img.src = currentImageData;
        imagePreview.appendChild(img);
      };
      reader.readAsDataURL(file);
    });

    // æ¸…ç©ºè¡¨å•
    function clearForm() {
      dishForm.reset();
      currentImageData = null;
      imagePreview.innerHTML = "æ— å›¾ç‰‡";
    }

    clearFormBtn.addEventListener("click", () => {
      clearForm();
    });

    // æäº¤è¡¨å•ï¼šæ–°å¢èœ
    dishForm.addEventListener("submit", (e) => {
      e.preventDefault();

      const name = dishNameInput.value.trim();
      const type =
        dishTypeSelect.value.trim() ||
        dishTypeSelect.options[dishTypeSelect.selectedIndex]?.text?.trim() ||
        "";
      const ingredients = dishIngredientsTextarea.value.trim();

      if (!name) {
        alert("èœåæ˜¯å¿…å¡«çš„å™¢ï½");
        return;
      }

      const newDish = {
        id: Date.now(),
        name,
        type,
        ingredients,
        imageData: currentImageData,
      };

      dishes.unshift(newDish); // æ–°çš„æ”¾æœ€å‰é¢
      saveToStorage();
      renderDishes();
      clearForm();
    });

    // åˆå§‹åŒ–
    loadFromStorage();
    renderDishes();
  </script>
</body>
</html>
